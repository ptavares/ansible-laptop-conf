---
- name: Install ntp
  package: 
    name: ntp
    state: present
  register: installation
  become: true

- name: Configure locales
  lineinfile: 
    dest: "/var/lib/locales/supported.d/local regexp={{ item.locale }} {{ item.encoding }}" 
    line: "{{ item.locale }} {{ item.encoding }} create=yes"
  notify:
    - Generate locales
  with_items:
    - "{{ locales_list }}"
  become: true

- name: Set localtime (/etc/localtime)
  copy: 
    remote_src: yes 
    src: "/usr/share/zoneinfo/{{ locales_timezone }} "
    dest: "/etc/localtime"

- name: Set timezone (/etc/timezone)
  copy: 
    content: "{{ locales_timezone }}\n" 
    dest: /etc/timezone
  notify:
    - Update TimeZone data
  become: true